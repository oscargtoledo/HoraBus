(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{277:function(e,t,n){"use strict";var r=n(13),a=n.n(r),o=n(5),c=n.n(o),l=n(99),i=n(199),s=n(240),u=n(98),f=n(152),m=n(377),d=n(0),g=n.n(d),h=n(378),p=n(137),y=n(219),v=n(131),b=(n(120),n(31),n(3)),w=n(175),x=(n(304),n(4)),E=n(28),O=n(381),C=n(374),S=n(156),j=n(373),k=g.a.createContext(),P=k;function D(){var e=Object(d.useContext)(P),t=e.isThemeDark,n=e.setIsThemeDark,r=e.isHidingUnselected,a=e.setHideUnselected;return{isThemeDark:t,setIsThemeDark:n,toggleTheme:function(){return n(!t)},isHidingUnselected:r,setHideUnselected:a,toggleHideSelected:function(){return a(!r)}}}function A(e){var t=Object(E.b)(),n=D(),r=n.isThemeDark,a=n.toggleTheme;return g.a.createElement(x.a,{style:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"}},g.a.createElement(S.a,{style:{color:null==t?void 0:t.colors.text}},"Mode fosc"),g.a.createElement(j.a,{onValueChange:function(){return a()},color:"red",value:r}))}var I,T=function(){var e=Object(E.b)(),t=D(),n=(t.isThemeDark,t.toggleTheme,t.isHidingUnselected),r=t.toggleHideSelected,o=g.a.useState(!1),c=a()(o,2),l=c[0],i=c[1],s=g.a.createElement(O.a,{mode:"contained",onPress:function(){return i(!0)},icon:"dots-vertical"});return g.a.createElement(x.a,{style:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"}},g.a.createElement(C.a,{visible:l,onDismiss:function(){return i(!1)},anchor:s,statusBarHeight:60},g.a.createElement(A,null),g.a.createElement(x.a,{style:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center"}},g.a.createElement(S.a,{style:{color:null==e?void 0:e.colors.text}},"Filtrar parades"),g.a.createElement(j.a,{onValueChange:function(){return r()},color:"red",value:n}))))},R=(b.a.create({center:{flex:1,justifyContent:"center",alignItems:"center",textAlign:"center"}}),b.a.create({center:{flex:1,justifyContent:"center",alignItems:"center",textAlign:"center"}}),n(16)),H=n.n(R),L=n(25),U=n(270),N=n.n(U),B=n(278),W=n(6),V=B.a.manifest.releaseChannel;"web"==W.a.OS?I="https://buschedule-api.herokuapp.com":void 0===V?I="http://192.168.0.14:8080":-1!==V.indexOf("production")&&(I="https://buschedule-api.herokuapp.com"),console.log("Current API url = "+I);var G={API_URL:I},z=N.a.create({baseURL:G.API_URL,baseURL:"https://buschedule-api.herokuapp.com",timeout:4e3}),F={get:z.get,post:z.post,delete:z.delete,put:z.put,patch:z.patch},_=n(379),M=n(375),J=function(e){return b.a.create({center:{flex:1,justifyContent:"center",alignItems:"center",textAlign:"center"}})},Z=function(){var e=Object(E.b)(),t=Object(d.useMemo)((function(){return J(e)}),[e]),n=Object(d.useState)("An\xf2nim"),r=a()(n,2),o=r[0],c=r[1],l=Object(d.useState)(""),i=a()(l,2),s=i[0],u=i[1],f=L.a.get("window").height;return g.a.createElement(w.a,{style:t.center},g.a.createElement(_.a,{style:[{margin:10,textAlign:"center"}],label:"Nom",mode:"flat",onChangeText:function(e){return c(e)},value:o,theme:{colors:{primary:null==e?void 0:e.colors.text}}}),g.a.createElement(_.a,{multiline:!0,textAlignVertical:"top",style:[{margin:10,width:"90%",height:f/2}],theme:{colors:{primary:null==e?void 0:e.colors.text}},mode:"flat",label:"Contingut",onChangeText:function(e){return u(e)},value:s}),g.a.createElement(M.a,{mode:"contained",onPress:function(){return e=o,t=s,H.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,H.a.awrap(F.post("/feedback",{alias:e,feedback:t}).then((function(e){console.log(e),201==e.status&&(console.log("success"),alert("El feedback s'ha enviat correctament","My Alert Msg",[{text:"Cancel",onPress:function(){return console.log("Cancel Pressed")},style:"cancel"},{text:"OK"}]),c("An\xf2nim"),u(""))})).catch((function(e){console.log(e)})));case 2:case"end":return n.stop()}}),null,null,null,Promise);var e,t}},"Enviar"))},K=n(101),$=n(35),q=n(271),Q=function(e){var t=e.items,n=e.isLoading,r=e.navigation;return n?g.a.createElement(q.a,{size:"large"}):t.map((function(e,t){return g.a.createElement(M.a,{key:e._id,mode:"contained",onPress:function(){return r.navigate("Schedule Viewer",{routeId:e._id,routeName:e.routeName})},style:{margin:2}},e.routeName)}))},X=(b.a.create({center:{flex:1,justifyContent:"center",alignItems:"center",textAlign:"center"}}),function(e){var t=e.navigation,n=(Object(E.b)(),Object(d.useState)([])),r=a()(n,2),o=r[0],c=r[1],l=Object(d.useState)(!1),i=a()(l,2),s=i[0],u=i[1];return Object(d.useEffect)((function(){!function(){var e;H.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H.a.awrap(F.get("/schedules/names"));case 2:e=t.sent,console.log(e.data),c(e.data),u(!1);case 6:case"end":return t.stop()}}),null,null,null,Promise)}()}),[s]),g.a.createElement(w.a,{style:{flexGrow:1,flexDirection:"column"}},g.a.createElement($.a,{refreshControl:g.a.createElement(K.a,{refreshing:s,onRefresh:function(){u(!0),retrieveData(),u(!1)}}),contentContainerStyle:{flex:1,flexDirection:"column",padding:10}},g.a.createElement(M.a,{mode:"contained",style:{margin:5},onPress:function(){return u(!0)}},"Recarregar Horaris"),g.a.createElement(Q,{isLoading:s,items:o,navigation:t})))}),Y=n(17),ee=n.n(Y),te=n(8),ne=n.n(te),re=n(9),ae=n.n(re),oe=n(11),ce=n.n(oe),le=n(12),ie=n.n(le),se=n(1),ue=n.n(se),fe=n(10),me=n(63),de=n(174);function ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue()(e);if(t){var a=ue()(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return ie()(this,n)}}function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye=function(e){var t=e.item,n=e.index,r=e.selected,a=e.extraStyle,o=void 0!==a&&a,c=(e.stopName,Object(E.b)()),l=D(),i=l.isHidingUnselected;l.toggleHideSelected;return g.a.createElement(w.a,{style:[{flex:1,textAlign:"center",shadowOpacity:0,flexDirection:"column"},[o?{flexBasis:200,flexGrow:1,flexShrink:1,flex:0}:{}]]},t.map((function(e,t){return g.a.createElement(S.a,{key:10*n+t,style:[pe(pe({},be.tableElement),{},{textAlign:"center",padding:10,alignContent:"center"}),i?t%2?{backgroundColor:null==c?void 0:c.colors.primaryLight}:{backgroundColor:null==c?void 0:c.colors.primary}:r?{backgroundColor:null==c?void 0:c.colors.columnAccent}:t%2?{backgroundColor:null==c?void 0:c.colors.primaryLight}:{backgroundColor:null==c?void 0:c.colors.primary}]},""!=e?e:"-")})))},ve=function(e){ce()(n,e);var t=ge(n);function n(e){var r;return ne()(this,n),(r=t.call(this,e)).scale=new fe.a.Value(1),r.onZoomEvent=fe.a.event([{nativeEvent:{scale:r.scale}}],{useNativeDriver:!0}),r.onZoomStateChange=function(e){e.nativeEvent.oldState===de.b.ACTIVE&&fe.a.spring(r.scale,{toValue:1,useNativeDriver:!0}).start()},r.state={schedule:null,selectedColumn:null,scheduleScale:1,selectedColumns:[]},r}return ae()(n,[{key:"componentDidMount",value:function(){var e=this;this.retrieveSchedule().then((function(t){e.setState({schedule:t[0]})}))}},{key:"retrieveSchedule",value:function(){var e,t,n;return H.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=this.props.route.params.routeId,r.next=4,H.a.awrap(F.get("/schedules/"+e));case 4:return t=r.sent,n=t.data,this.setState({schedule:n[0]}),r.abrupt("return",n);case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0);case 13:case"end":return r.stop()}}),null,this,[[0,10]],Promise)}},{key:"componentDidUpdate",value:function(){console.log(this.state.selectedColumns)}},{key:"selectColumn",value:function(e){console.log("Selected "+e);var t=this.state.selectedColumns.indexOf(e);if(console.log("index = "+t),-1!==t){var n=this.state.selectedColumns;n.splice(t,1),console.log("temp = "+n),this.setState((function(e){return{selectedColumns:n}}))}else this.setState((function(t){return{selectedColumns:[].concat(ee()(t.selectedColumns),[e])}}))}},{key:"regularSchedule",value:function(){var e=this,t=this.props.theme,n=this.state.schedule;return g.a.createElement(x.a,{style:{flex:1}},g.a.createElement($.a,{horizontal:!0,contentContainerStyle:{flexGrow:1,alignContent:"center"}},g.a.createElement(x.a,{style:{flex:1},id:"horizontalContainer"},g.a.createElement(x.a,{id:"stopNameRow",style:{flex:1,flexDirection:"row",justifyContent:"space-between"}},n.stops.map((function(n,r){return g.a.createElement(me.a,{activeOpacity:1,onPress:function(){return e.selectColumn(r)},style:[{flex:1,flexGrow:1,flexShrink:1,flexBasis:0,flexWrap:"wrap",padding:3,justifyContent:"center",alignItems:"center"},e.state.selectedColumns.includes(r)?{backgroundColor:null==t?void 0:t.colors.columnAccent}:{}],key:r},g.a.createElement(S.a,{style:{textAlign:"center"}},n))}))),g.a.createElement(x.a,{style:{flex:10}},g.a.createElement($.a,{style:{},showsVerticalScrollIndicator:!1,contentContainerStyle:{height:0,flexDirection:"row",justifyContent:"center"}},n.hours.map((function(t,n){return g.a.createElement(ye,{key:n,index:n,item:t,selected:e.state.selectedColumns.includes(n)})})))))))}},{key:"filteringSchedule",value:function(){var e=this,t=this.props.theme,n=this.state.schedule;return g.a.createElement(x.a,{style:{flex:1}},g.a.createElement(x.a,null,g.a.createElement($.a,{horizontal:!0,contentContainerStyle:{flexGrow:1,alignContent:"center"}},n.stops.map((function(n,r){return g.a.createElement(me.a,{activeOpacity:1,onPress:function(){return e.selectColumn(r)},style:[{flex:1,flexGrow:1,flexShrink:1,flexBasis:0,flexWrap:"wrap",padding:3,justifyContent:"center",alignItems:"center"},e.state.selectedColumns.includes(r)?{backgroundColor:null==t?void 0:t.colors.columnAccent}:{}],key:r},g.a.createElement(S.a,{style:{textAlign:"center"}},n))})))),g.a.createElement(x.a,{style:{flex:1}},g.a.createElement($.a,{horizontal:!0,contentContainerStyle:{flexDirection:"column"}},g.a.createElement(x.a,{style:{flexDirection:"row"}},this.state.selectedColumns.map((function(t,r){return g.a.createElement(me.a,{activeOpacity:1,onPress:function(){return e.selectColumn(t)},style:[{flex:1,flexGrow:1,flexShrink:1,flexBasis:0,flexWrap:"wrap",padding:3,justifyContent:"center",alignItems:"center"}],key:t},g.a.createElement(S.a,{style:{textAlign:"center"}},n.stops[t]))}))),g.a.createElement($.a,{style:{},showsVerticalScrollIndicator:!1,contentContainerStyle:{height:0,flexDirection:"row"}},n.hours.map((function(t,n){return e.state.selectedColumns.includes(n)&&g.a.createElement(ye,{key:n,index:n,item:t,extraStyle:!0,selected:e.state.selectedColumns.includes(n)})}))))))}},{key:"render",value:function(){var e=this,t=null===this.state.schedule,n=this.props.theme;L.a.get("window").height;return g.a.createElement(w.a,{style:{flex:1}},t?g.a.createElement(q.a,{size:"large"}):g.a.createElement(w.a,{style:{flex:1,justifyContent:"center"}},g.a.createElement(w.a,{style:{backgroundColor:null==n?void 0:n.colors.primaryDark,alignContent:"center"}},g.a.createElement(S.a,{style:{textAlign:"center",fontSize:20}},this.state.schedule.routeName)),g.a.createElement(P.Consumer,null,(function(t){var n=t.isHidingUnselected;t.toggleHideSelected;return n?e.filteringSchedule():e.regularSchedule()}))))}}]),n}(g.a.Component),be=b.a.create({box:{width:50,height:50},tableElement:{width:100},center:{flex:1,justifyContent:"center",alignItems:"center",textAlign:"center"},container:{flex:1,padding:18,paddingTop:35,justifyContent:"space-around"},HeadStyle:{height:50,alignContent:"center"},TableText:{flex:1,textAlign:"center",alignSelf:"center",width:100}}),we=Object(E.c)(ve),xe=n(272);var Ee=b.a.create({container:{flex:1,justifyContent:"flex-start",alignItems:"stretch"},loginWebView:{flex:1,marginTop:30,marginBottom:20}}),Oe=Object(E.c)((function(e){var t,n=null==(t=e.theme)?void 0:t.dark,r='<script type="text/javascript" src="https://platform.twitter.com/widgets.js"><\/script><a class="twitter-timeline"'+(n?'data-theme="dark"':"")+'href="https://twitter.com/BusGarraf?ref_src=twsrc%5Etfw">Carregant Twitts...</a> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"><\/script> ';return console.log(n),g.a.createElement(x.a,{style:Ee.container},g.a.createElement(xe.WebView,{containerStyle:{flex:1,flexBase:10,flexShrink:1},source:{html:r},javaScriptEnabled:!0}))}));function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var je=Object(y.a)(),ke=function(e){var t=e.navigation,n=Object(E.b)();return g.a.createElement(je.Navigator,{screenOptions:Se(Se({},v.a.SlideFromRightIOS),{},{headerStyle:{backgroundColor:null==n?void 0:n.colors.primary},title:"Contacte",headerRight:function(){return g.a.createElement(T,null)},headerLeft:function(){return g.a.createElement(O.a,{mode:"contained",icon:"menu",onPress:function(){return t.toggleDrawer()}})}})},g.a.createElement(je.Screen,{name:"Contact",component:Z}))},Pe=function(e){var t=e.navigation,n=Object(E.b)();return g.a.createElement(je.Navigator,{screenOptions:Se(Se({},v.a.SlideFromRightIOS),{},{headerStyle:{backgroundColor:null==n?void 0:n.colors.primary},headerRight:function(){return g.a.createElement(T,null)}})},g.a.createElement(je.Screen,{name:"View Tweets",component:Oe,options:{title:"Twitter BusGarraf",headerRight:function(){return g.a.createElement(A,null)},headerLeft:function(){return g.a.createElement(O.a,{mode:"contained",icon:"menu",onPress:function(){return t.toggleDrawer()}})}}}))},De=function(e){var t=e.navigation,n=Object(E.b)();return g.a.createElement(je.Navigator,{screenOptions:Se(Se({},v.a.SlideFromRightIOS),{},{headerStyle:{backgroundColor:null==n?void 0:n.colors.primary},headerRight:function(){return g.a.createElement(T,null)}})},g.a.createElement(je.Screen,{name:"Select Schedule",component:X,options:{title:"HoraBus",headerRight:function(){return g.a.createElement(A,null)},headerLeft:function(){return g.a.createElement(O.a,{mode:"contained",icon:"menu",onPress:function(){return t.toggleDrawer()}})}}}),g.a.createElement(je.Screen,{name:"Schedule Viewer",component:we,options:function(e){return{title:e.route.params.routeName}}}))},Ae=n(380),Ie=(Object(Ae.a)(),Object(h.a)());function Te(e){var t=e.navigation;return g.a.createElement(de.a,null,g.a.createElement(M.a,{mode:"contained",onPress:function(){t.navigate("Home")}},"Horaris"),g.a.createElement(M.a,{mode:"contained",onPress:function(){t.navigate("TwitterFeed")}},"Twitter"),g.a.createElement(M.a,{mode:"contained",onPress:function(){t.navigate("Contact")}},"Contacte"))}var Re=function(){Object(p.a)(),Object(E.b)();return g.a.createElement(Ie.Navigator,{drawerType:"front",edgeWidth:25,drawerContent:function(e){return g.a.createElement(Te,e)}},g.a.createElement(Ie.Screen,{name:"Home",component:De}),g.a.createElement(Ie.Screen,{name:"TwitterFeed",component:Pe}),g.a.createElement(Ie.Screen,{name:"Contact",component:ke}))},He=n(67),Le=n(60),Ue=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ne(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n(293).config(),n(197);var Ve=We(We(We({},u.a),l.a),{},{dark:!1,colors:We(We(We({},u.a.colors),l.a.colors),{},{primary:"#01579b",primaryDark:"#002f6c",primaryLight:"#4f83cc",background:"#01579b",accent:"#3c67a3",columnAccent:"#5390E0",surface:"#01457A",card:"#224C6B",text:"#ffffff"})}),Ge=We(We(We({},f.a),i.a),{},{dark:!0,colors:We(We(We({},f.a.colors),i.a.colors),{},{background:"#121212",accent:"#424242",primary:"#212121",columnAccent:"#6b6b6b",primary:"#424242",primaryLight:"#6b6b6b"})});window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),e,showInstallPromotion(),console.log("'beforeinstallprompt' event was fired.")})),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="/service-worker.js";console.log("PUBLIC_URL = "),Ue?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ne(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Ne(t,e)}))}}();t.a=function(){var e=g.a.useState(!1),t=a()(e,2),n=t[0],r=t[1],o=g.a.useState(!1),c=a()(o,2),l=c[0],i=c[1],u=n?Ge:Ve;return Le.a.addEventListener("hardwareBackPress",(function(){return!0})),g.a.createElement(P.Provider,{value:{isThemeDark:n,setIsThemeDark:r,isHidingUnselected:l,setHideUnselected:i}},g.a.createElement(m.a,{theme:u},g.a.createElement(s.a,{theme:u},g.a.createElement(He.a,{barStyle:"light-content",backgroundColor:null==u?void 0:u.colors.primaryDark}),g.a.createElement(Re,null))))}},289:function(e,t,n){e.exports=n(366)},304:function(e,t){},358:function(e,t){}},[[289,1,2]]]);
//# sourceMappingURL=app.ffd94480.chunk.js.map